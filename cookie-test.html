<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Test Page</title>
    <link rel="stylesheet" href="css/global.css">
    <style>
        .console {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            padding: 20px;
            border-radius: 8px;
            max-height: 300px;
            overflow-y: auto;
            font-family: var(--font-code);
            margin: 20px 0;
        }
        .console-line {
            margin-bottom: 8px;
            font-size: 14px;
        }
        .success {
            color: var(--success-color);
        }
        .error {
            color: var(--error-color);
        }
        .warning {
            color: var(--warning-color);
        }
        .info {
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1><a href="index.html">GameRevu</a></h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="index.html" class="nav-link">Home</a></li>
                        <li><a href="#" class="active nav-link">Cookie Test</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <h1>Cookie Functionality Test</h1>
            <p>This page tests if cookies work correctly in your browser and domain.</p>
            
            <div class="card">
                <div class="card-body">
                    <h2>Test Controls</h2>
                    <button id="set-cookie" class="button">Set Test Cookies</button>
                    <button id="get-cookie" class="button">Get Cookies</button>
                    <button id="delete-cookie" class="button button-error">Delete Cookies</button>
                </div>
            </div>
            
            <h2>Console Output</h2>
            <div class="console" id="console-output"></div>
            
            <h2>Cookie Information</h2>
            <div class="card">
                <div class="card-body">
                    <h3>Current Cookies</h3>
                    <pre id="all-cookies"></pre>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2023 Cookie Test Page</p>
            </div>
        </div>
    </footer>

    <script>
        // Console logging
        function logToConsole(message, type = 'info') {
            const consoleOutput = document.getElementById('console-output');
            const line = document.createElement('div');
            line.className = `console-line ${type}`;
            line.textContent = message;
            consoleOutput.appendChild(line);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        // Update cookie display
        function updateCookieDisplay() {
            const cookieDisplay = document.getElementById('all-cookies');
            cookieDisplay.textContent = document.cookie || 'No cookies found';
        }
        
        // Set test cookies with various configurations
        function setTestCookies() {
            try {
                logToConsole('Setting test cookies...', 'info');
                
                // Set a simple cookie with no attributes
                document.cookie = 'testCookie1=value1';
                logToConsole('Set basic cookie: testCookie1=value1', 'success');
                
                // Set a cookie with path and expiration
                const date = new Date();
                date.setTime(date.getTime() + (7 * 24 * 60 * 60 * 1000)); // 7 days
                const expires = `expires=${date.toUTCString()}`;
                document.cookie = `testCookie2=value2;${expires};path=/`;
                logToConsole('Set cookie with path and expiration: testCookie2=value2', 'success');
                
                // Set a cookie with SameSite attribute
                document.cookie = 'testCookie3=value3;path=/;SameSite=Lax';
                logToConsole('Set cookie with SameSite=Lax: testCookie3=value3', 'success');
                
                // Special values cookie
                document.cookie = 'testCookie4=' + JSON.stringify({user: 'test', id: 123});
                logToConsole('Set cookie with JSON value: testCookie4', 'success');
                
                updateCookieDisplay();
            } catch (error) {
                logToConsole(`Error setting cookies: ${error.message}`, 'error');
            }
        }
        
        // Get and show cookies
        function getCookies() {
            try {
                logToConsole('Getting cookies...', 'info');
                
                const cookies = document.cookie.split(';');
                if (cookies.length === 0 || (cookies.length === 1 && cookies[0] === '')) {
                    logToConsole('No cookies found', 'warning');
                } else {
                    cookies.forEach(cookie => {
                        const [name, value] = cookie.trim().split('=');
                        logToConsole(`Found cookie: ${name} = ${value}`, 'success');
                    });
                }
                
                updateCookieDisplay();
            } catch (error) {
                logToConsole(`Error getting cookies: ${error.message}`, 'error');
            }
        }
        
        // Delete test cookies
        function deleteTestCookies() {
            try {
                logToConsole('Deleting test cookies...', 'info');
                
                document.cookie = 'testCookie1=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';
                document.cookie = 'testCookie2=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';
                document.cookie = 'testCookie3=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';
                document.cookie = 'testCookie4=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';
                
                logToConsole('Test cookies deleted', 'success');
                updateCookieDisplay();
            } catch (error) {
                logToConsole(`Error deleting cookies: ${error.message}`, 'error');
            }
        }
        
        // Check browser cookie settings
        function checkBrowserSettings() {
            try {
                if (navigator.cookieEnabled) {
                    logToConsole('Browser cookie settings: ENABLED', 'success');
                } else {
                    logToConsole('Browser cookie settings: DISABLED', 'error');
                    logToConsole('Please enable cookies in your browser settings', 'warning');
                }
                
                // Test 3rd party cookie settings
                logToConsole('Checking for 3rd-party cookie restrictions...', 'info');
                logToConsole('Note: Some browsers block 3rd-party cookies by default', 'info');
                
                // Check if in a private/incognito window (approximate check)
                try {
                    localStorage.setItem('test', 'test');
                    localStorage.removeItem('test');
                    logToConsole('Not in private/incognito mode', 'success');
                } catch (e) {
                    logToConsole('Possibly in private/incognito mode - cookies may be limited', 'warning');
                }
                
                updateCookieDisplay();
            } catch (error) {
                logToConsole(`Error checking browser settings: ${error.message}`, 'error');
            }
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('set-cookie').addEventListener('click', setTestCookies);
            document.getElementById('get-cookie').addEventListener('click', getCookies);
            document.getElementById('delete-cookie').addEventListener('click', deleteTestCookies);
            
            // Initial setup
            logToConsole('Cookie test page loaded', 'info');
            checkBrowserSettings();
            updateCookieDisplay();
            
            // Check for existing cookies
            getCookies();
        });
    </script>
</body>
</html> 